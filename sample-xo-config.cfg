# Xen Orchestra Installation Configuration
# Copy this file to xo-config.cfg and modify as needed
# =====================================================

# HTTP port for Xen Orchestra web interface
HTTP_PORT=80

# HTTPS port for Xen Orchestra web interface
HTTPS_PORT=443

# Installation directory for Xen Orchestra
INSTALL_DIR=/opt/xen-orchestra

# SSL certificate directory
SSL_CERT_DIR=/etc/ssl/xo

# SSL certificate file names
SSL_CERT_FILE=xo-cert.pem
SSL_KEY_FILE=xo-key.pem

# Git branch to use (master, stable, or specific tag)
# - master: Latest development version with newest features
GIT_BRANCH=master

# Backup directory for updates
# Backups are created automatically before updates and rebuilds
BACKUP_DIR=/opt/xo-backups

# Number of backups to keep
# Older backups are automatically purged after this limit
BACKUP_KEEP=5

# Node.js version to install (LTS 20 recommended)
# Comes with npm v10
NODE_VERSION=20

# Service user (leave empty or comment out to run as root)
# You can use any username here - the script will create the user if needed.
# Default is "xo", but you can specify any name (e.g., SERVICE_USER=myuser)
# 
# Running as root: Process runs as root user (UID 0)
# Running as dedicated user: Process runs as specified user with root group membership
#                           and elevated privileges for NFS/CIFS compatibility
# 
# When SERVICE_USER is set to a non-root user:
# - The user is created (if needed) and added to the root group (GID 0) for file access
# - Sudo is configured to allow mount operations without password
# - The service runs with CAP_SYS_ADMIN capability for mounting
# - This provides similar NFS access as running with SERVICE_USER empty (root)
# 
# Both configurations work with existing NFS shares without server-side changes.
# Using a dedicated user provides better process isolation.
SERVICE_USER=xo

# Enable debug mode (true/false)
# Shows additional logging information
DEBUG_MODE=false

# =====================================================
# REVERSE PROXY CONFIGURATION
# =====================================================
# These options are for users who want to use an external reverse proxy
# (nginx, Apache, Caddy, etc.) instead of exposing XO directly.
#
# Typical reverse proxy setup:
# 1. Set non-privileged ports (e.g., HTTP_PORT=8080, HTTPS_PORT=8443)
# 2. Configure REVERSE_PROXY_TRUST with your proxy's IP address
# 3. Optionally set BIND_ADDRESS=127.0.0.1 if proxy is on the same host
# 4. Set REDIRECT_TO_HTTPS=true if you want HTTP to redirect to HTTPS
# 5. Configure your external reverse proxy to forward to XO's ports
#
# Example for nginx on same host:
#   HTTP_PORT=8080
#   HTTPS_PORT=8443
#   BIND_ADDRESS=127.0.0.1
#   REVERSE_PROXY_TRUST=127.0.0.1
#   REDIRECT_TO_HTTPS=false
#
# Example for nginx on different host:
#   HTTP_PORT=8080
#   HTTPS_PORT=8443
#   BIND_ADDRESS=0.0.0.0
#   REVERSE_PROXY_TRUST=192.168.1.100
#   REDIRECT_TO_HTTPS=false

# Bind address for HTTP/HTTPS listeners
# - 0.0.0.0: Listen on all network interfaces (default)
# - 127.0.0.1: Listen only on localhost (use with reverse proxy on same host)
# - Specific IP: Listen only on that network interface
BIND_ADDRESS=0.0.0.0

# Redirect all HTTP traffic to HTTPS (true/false)
# Note: This is XO's internal redirect. If using a reverse proxy,
# you may want to handle HTTPS redirect at the proxy level instead.
REDIRECT_TO_HTTPS=false

# Trust X-Forwarded-* headers from reverse proxy
# Options:
#   false = Do not trust forwarded headers (default, no reverse proxy)
#   true = Trust headers from all sources (NOT RECOMMENDED - security risk)
#   IP address(es) = Trust only from specific IPs (e.g., 127.0.0.1 or 192.168.1.100)
#
# For multiple IPs, separate with spaces: REVERSE_PROXY_TRUST="127.0.0.1 192.168.1.1"
# Leave as 'false' if not using a reverse proxy.
# Set to your reverse proxy's IP address if using one.
REVERSE_PROXY_TRUST=false

# Redis connection settings (advanced users only)
# Leave commented to use default: redis://localhost:6379/0
# 
# Examples:
#   REDIS_URI=redis://localhost:6379/0
#   REDIS_URI=redis://redis.company.lan:6379/42
#   REDIS_SOCKET=/var/run/redis/redis.sock
#
# REDIS_URI=
# REDIS_SOCKET=
